# EPD å¢¨æ°´å±å›¾ç‰‡ç®¡ç†ç³»ç»Ÿ

E-Paper Display å›¾ç‰‡ç®¡ç†ç³»ç»Ÿï¼Œæä¾› Web ç•Œé¢ç®¡ç†å’Œ Socket ç½‘ç»œé€šä¿¡æœåŠ¡ã€‚

## ðŸ“‹ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜Ž

### 1. manage.py
**ç»Ÿä¸€ç®¡ç†ç³»ç»Ÿå…¥å£**

- **åŠŸèƒ½**ï¼šç»Ÿä¸€å¯åŠ¨å’Œç®¡ç† Web æœåŠ¡ä¸Ž Socket æœåŠ¡
- **ç”¨é€”**ï¼šé¡¹ç›®çš„æ€»å…¥å£ï¼Œæ”¯æŒä¸‰ç§è¿è¡Œæ¨¡å¼
- **å¯åŠ¨æ–¹æ³•**ï¼š
  ```bash
  # å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆæŽ¨èï¼‰
  python manage.py --mode all

  # ä»…å¯åŠ¨ Web æœåŠ¡
  python manage.py --mode web

  # ä»…å¯åŠ¨ Socket æœåŠ¡
  python manage.py --mode socket

  # è‡ªå®šä¹‰ç«¯å£å’Œç›®å½•
  python manage.py --mode all --web-port 5000 --socket-port 18888 --image-dir ./dist/data
  ```

### 2. web_server.py
**Web ç®¡ç†ç•Œé¢**

- **åŠŸèƒ½**ï¼šæä¾› Web ç•Œé¢è¿›è¡Œå›¾ç‰‡ä¸Šä¼ ã€é¢„è§ˆã€ç®¡ç†
- **ç”¨é€”**ï¼šæµè§ˆå™¨è®¿é—®ï¼Œå›¾å½¢åŒ–ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒå›¾ç‰‡æ ¼å¼è½¬æ¢
- **å¯åŠ¨æ–¹æ³•**ï¼š
  ```bash
  # ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆç«¯å£ 5000ï¼‰
  python web_server.py

  # è‡ªå®šä¹‰ä¸»æœºå’Œç«¯å£
  python web_server.py --host 0.0.0.0 --port 5000
  ```

### 3. epd_socket_server.py
**Socket æœåŠ¡å™¨**

- **åŠŸèƒ½**ï¼šç›‘å¬ TCP è¿žæŽ¥ï¼Œå¤„ç†å®¢æˆ·ç«¯å‘½ä»¤ï¼Œè¿”å›žå›¾ç‰‡æ•°æ®
- **ç”¨é€”**ï¼šä¸Ž E-Paper è®¾å¤‡é€šä¿¡ï¼Œæ”¯æŒæ–‡ä»¶ç›‘æŽ§è‡ªåŠ¨æ›´æ–°å›¾ç‰‡åˆ—è¡¨
- **å¯åŠ¨æ–¹æ³•**ï¼š
  ```bash
  # ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆç«¯å£ 18888ï¼‰
  python epd_socket_server.py

  # æŒ‡å®šå›¾ç‰‡ç›®å½•
  python epd_socket_server.py --image-dir ./dist/data

  # è‡ªå®šä¹‰ä¸»æœºå’Œç«¯å£
  python epd_socket_server.py --host 0.0.0.0 --port 18888
  ```

### 4. epd_socket_client.py
**Socket å®¢æˆ·ç«¯ï¼ˆæµ‹è¯•å·¥å…·ï¼‰**

- **åŠŸèƒ½**ï¼šè¿žæŽ¥ Socket æœåŠ¡å™¨ï¼Œå‘é€å‘½ä»¤æµ‹è¯•æœåŠ¡
- **ç”¨é€”**ï¼šè°ƒè¯•å’Œæµ‹è¯• Socket æœåŠ¡å™¨åŠŸèƒ½
- **å¯åŠ¨æ–¹æ³•**ï¼š
  ```bash
  # äº¤äº’æ¨¡å¼
  python epd_socket_client.py

  # å‘é€å‘½ä»¤ï¼ˆéžäº¤äº’ï¼‰
  python epd_socket_client.py update

  # ä¸‹è½½å½“å‰å›¾ç‰‡
  python epd_socket_client.py get -o ./downloaded

  # ä½¿ç”¨ C æ•°ç»„æ ¼å¼ä¸‹è½½
  python epd_socket_client.py get_c

  # è‡ªå®šä¹‰æœåŠ¡å™¨åœ°å€
  python epd_socket_client.py --host 127.0.0.1 --port 18888 status
  ```

## ðŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šç»Ÿä¸€å¯åŠ¨ï¼ˆæŽ¨èï¼‰
```bash
python manage.py --mode all --image-dir ./dist/data
```

### æ–¹å¼äºŒï¼šåˆ†åˆ«å¯åŠ¨
```bash
# ç»ˆç«¯ 1ï¼šå¯åŠ¨ Web æœåŠ¡
python web_server.py

# ç»ˆç«¯ 2ï¼šå¯åŠ¨ Socket æœåŠ¡
python epd_socket_server.py --image-dir ./dist/data
```

### æ–¹å¼ä¸‰ï¼šæµ‹è¯•è¿žæŽ¥
```bash
# æµ‹è¯• Socket æœåŠ¡å™¨
python epd_socket_client.py update
python epd_socket_client.py list
```

## ðŸ“Š ç³»ç»Ÿæž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web æµè§ˆå™¨     â”‚â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                     â”‚ HTTP (5000)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  web_server.py  â”‚  â”‚
â”‚  (Flask Web)     â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   manage.py     â”‚â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ TCP (18888)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚epd_socket_serverâ”‚
â”‚   .py           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ æ–‡ä»¶ç›‘æŽ§
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ./dist/data   â”‚
â”‚   (BMP å›¾ç‰‡)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚epd_socket_clientâ”‚
â”‚   .py           â”‚
â”‚  (æµ‹è¯•å®¢æˆ·ç«¯)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ”§ ä¸»è¦åŠŸèƒ½

### Web ç®¡ç†ç•Œé¢
- å›¾ç‰‡ä¸Šä¼ ï¼ˆJPGã€PNGã€BMPã€GIFï¼‰
- è‡ªåŠ¨è½¬æ¢ä¸º BMP æ ¼å¼
- å›¾ç‰‡é¢„è§ˆå’Œç®¡ç†
- å®žæ—¶è½¬æ¢è¿›åº¦æ˜¾ç¤º

### Socket æœåŠ¡å™¨
- ç›‘å¬ 18888 ç«¯å£
- æ”¯æŒå‘½ä»¤ï¼š`update`ã€`info`ã€`get`ã€`get_c`ã€`list`
- æ–‡ä»¶ç›‘æŽ§ï¼šè‡ªåŠ¨æ£€æµ‹ BMP å›¾ç‰‡å˜åŒ–
- 5ç§’é˜²æŠ–åŠ¨æœºåˆ¶ï¼šé¿å…é¢‘ç¹æ›´æ–°
- æ–‡ä»¶åæŽ’åºï¼šæ”¯æŒæ•°å­—æ–‡ä»¶åæŽ’åº

### æ–‡ä»¶ç›‘æŽ§ç‰¹æ€§
- è‡ªåŠ¨æ‰«æ `dist/data` ç›®å½•ä¸‹çš„ BMP æ–‡ä»¶
- æ–‡ä»¶ä¿®æ”¹æ—¶é—´+å¤§å°æ ¡éªŒå’Œæ£€æµ‹å˜åŒ–
- å˜åŒ–åŽ 5 ç§’é˜²æŠ–åŠ¨å»¶è¿Ÿ
- è‡ªåŠ¨é‡æ–°åŠ è½½å›¾ç‰‡åˆ—è¡¨

## âš™ï¸ é…ç½®è¯´æ˜Ž

### é»˜è®¤ç«¯å£
- **Web æœåŠ¡**ï¼š5000
- **Socket æœåŠ¡**ï¼š18888

### é»˜è®¤ç›®å½•
- **å›¾ç‰‡ç›®å½•**ï¼š`./dist/data`
- **ä¸Šä¼ ç›®å½•**ï¼š`./uploads`

### æ”¯æŒçš„å›¾ç‰‡æ ¼å¼
- è¾“å…¥ï¼šJPGã€JPEGã€PNGã€GIFã€BMP
- è¾“å‡ºï¼šBMPï¼ˆç”¨äºŽ E-Paper æ˜¾ç¤ºï¼‰

## ðŸ“ ä¾èµ–å®‰è£…

```bash
pip install -r requirements.txt
```

æˆ–å•ç‹¬å®‰è£…ï¼š
```bash
pip install "Flask>=2.3.0" "Pillow>=10.0.0"
```
